<!DOCTYPE html>
<html>
<head>
	<title>{% block title %}{% endblock %}</title>
	
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<link rel="stylesheet" href="/lib/bootstrap-4.3.1-dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="/lib/open-iconic/font/css/open-iconic-bootstrap.css">
	
	<style>
		/* Source: https://stackoverflow.com/a/49554284 */
		a.card-link,
		a.card-link:hover {
			color: inherit;
		}
		
		a.card-link:hover .card {
			box-shadow: 2px 2px 5px 0px rgba(0,0,0,0.75);
		}
		
		.voucher-card img {
			height: 10rem;
		}

	</style>

	<script src="http://localhost:90/auth/js/keycloak.js"></script>
    <script>
        var keycloak = Keycloak({
    		url: 'http://localhost:90/auth',
    		realm: 'cti',
    		clientId: 'webserver'
		});
		keycloak.onTokenExpired = function() {
			keycloak.updateToken(5)
				.success(function(refreshed) {
					if (refreshed) {
						document.cookie = "ACCESS_TOKEN=" + keycloak.token + "; expires=Fri, 19 Jun 2020 20:47:11 UTC; path=/";
					}
				})
				.error(function() {
					document.cookie = "ACCESS_TOKEN=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
				});
		};
        keycloak.init({ onLoad: 'login-required', checkLoginIframe: false })
			.success(function(authenticated) {
				if (authenticated) {
            		document.cookie = "ACCESS_TOKEN=" + keycloak.token + "; expires=Fri, 19 Jun 2020 20:47:11 UTC; path=/";
				}
        	})
			.error(function() {
            	document.cookie = "ACCESS_TOKEN=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
        	});
    </script>

	{% block head %}
	{% endblock %}
</head>

<body>
	{% block content %}
	{% endblock %}
	
	<script src="/lib/jquery-3.4.1.slim.min.js"></script>
	<script src="/lib/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
	{% block scripts %}
	{% endblock %}
</body>

</html>